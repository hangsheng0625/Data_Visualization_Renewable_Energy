{
    "$schema": "https://vega.github.io/schema/vega/v5.json",
    "description": "A word cloud visualization of greenhouse gas emission categories.",
    "width": 800,
    "height": 600,
    "padding": 10,
    "data": [
      {
        "name": "table",
        "values": [
          {"category": "Commercial", "value": 6.6},
          {"category": "Residential buildings", "value": 10.9},
          {"category": "Rail", "value": 0.4},
          {"category": "Pipeline", "value": 0.3},
          {"category": "Shipping", "value": 1.7},
          {"category": "Aviation", "value": 1.9},
          {"category": "Road Transport", "value": 11.9},
          {"category": "Other industry", "value": 10.6},
          {"category": "Machinery", "value": 0.5},
          {"category": "Paper and Pulp", "value": 0.6},
          {"category": "Food and Tobacco", "value": 1},
          {"category": "Chemical and Petrochemical", "value": 3.6},
          {"category": "Non-ferrous metals", "value": 0.7},
          {"category": "Iron and steel", "value": 7.2},
          {"category": "Livestock and manure", "value": 5.8},
          {"category": "Agricultural soils", "value": 4.1},
          {"category": "Rice cultivation", "value": 1.3},
          {"category": "Crop burning", "value": 3.5},
          {"category": "Deforestation", "value": 2.2},
          {"category": "Cropland", "value": 1.4},
          {"category": "Grassland", "value": 0.1},
          {"category": "Landfills", "value": 1.9},
          {"category": "Wastewater", "value": 1.3},
          {"category": "Chemicals", "value": 2.2},
          {"category": "Cement", "value": 3},
          {"category": "Energy in Agriculture and Fishing", "value": 1.7},
          {"category": "Fugitive emissions from energy production", "value": 5.8},
          {"category": "Unallocated fuel combustion", "value": 7.8}
        ],
        "transform": [
          {
            "type": "formula",
            "as": "angle",
            "expr": "0"
          },
          {
            "type": "formula",
            "as": "group",
            "expr": "'All Categories'"
          }
        ]
      }
    ],
    "scales": [
      {
        "name": "color",
        "type": "linear",
        "domain": {"data": "table", "field": "value"},
        "range": ["#4575b4", "#abd9e9", "#fee090", "#f46d43"]
      }
    ],
    "marks": [
      {
        "type": "group",
        "from": {"facet": {"name": "facet", "data": "table", "groupby": "group"}},
        "encode": {
          "update": {"width": {"signal": "width"}, "height": {"signal": "height"}}
        },
        "marks": [
          {
            "type": "rect",
            "encode": {
              "enter": {
                "x": {"value": 0},
                "width": {"signal": "width"},
                "y": {"value": 0},
                "height": {"signal": "height"},
                "fill": {"value": "white"}
              }
            }
          },
          {
            "type": "text",
            "from": {"data": "facet"},
            "encode": {
              "enter": {
                "text": {"field": "category"},
                "align": {"value": "center"},
                "baseline": {"value": "alphabetic"},
                "fill": {"scale": "color", "field": "value"}
              },
              "update": {"fillOpacity": {"value": 1}},
              "hover": {"fillOpacity": {"value": 0.5}}
            },
            "transform": [
              {
                "type": "wordcloud",
                "size": {"signal": "[width, height]"},
                "text": {"field": "category"},
                "rotate": {"field": "datum.angle"},
                "font": "Helvetica Neue, Arial",
                "fontSize": {"field": "datum.value"},
                "fontSizeRange": [12, 48],
                "padding": 20
              }
            ]
          }
        ]
      }
    ],
    "signals": [
      {
        "name": "tooltip",
        "value": {},
        "on": [
          {"events": "text:mouseover", "update": "datum"},
          {"events": "text:mouseout", "update": "{}"}
        ]
      }
    ],
    "title": {
      "text": {"signal": "tooltip.category"},
      "subtitle": {"signal": "'Value: ' + tooltip.value"}
    }
    
  }